{% extends 'common/base.html' %}
{% block title %}Listado tickets{% endblock %}
{% load static %}
{% block content %}
<section class="mt-2" >
    <table class="table table-striped table-bordered">
        <thead>
            <tr>
                <th scope="col">#</th>
                <th scope="col">Titulo</th>
                <th scope="col">Creado por</th>
                <th scope="col">Estado</th>
                <th scope="col">Prioridad</th>
                <th scope="col">Fecha de creación</th>
                <th scope="col">Departamento</th>
                <th scope="col">Asignado a</th>
                <th scope="col">Categorías</th>
                <th scope="col">Acciones</th>
            </tr>
        </thead>
        {% for ticket in tickets %}
        <tbody>
            <tr>
                <th scope="row">{{ ticket.id }}</th>
                <td>{{ ticket.title }}</td>
                <td>{{ ticket.user.name }}</td>
                <td id="state" ><span>{{ ticket.state }}</span></td>
                <td id="priority" ><span>{{ ticket.priority }}</span></td>
                <td>{{ ticket.created_at }}</td>
                <td>{{ ticket.department }}</td>
                <td>{{ ticket.assigned_to }}</td>
                <td>{{ticket.categories}}</td>
                <td>
                    <a 
                        class="btn btn-primary"
                        href="{% url 'ticket:detail_ticket' pk=ticket.id %}"
                        >
                        Ir a detalle
                    </a>
                </td>
            </tr>
        </tbody>
        {% endfor %}
    </table>
    <a class="btn btn-success" href="{% url 'report:export_tickets' %}" >Exportar a Excel</a>
    <script type="module" src="{% static 'ticket/js/main.js' %}"></script>
</section>
{% endblock %}